name: CI

on:
   push:
     branches:
       - main

jobs:
   build:
     runs-on: ubuntu-latest

     steps:
       - name: Get Your Code
         uses: actions/checkout@v2

       - name: Say Hello to the World
         run: echo "Hello, World!"

       - name: Azure login
         uses: azure/login@v2
         with:
          auth-type: IDENTITY
          client-id: 5c9d6817-a4c2-4afb-8dac-79e70d032a8d
          tenant-id: 5fd0f7e7-b27a-4b1d-9897-57500d767b01
          subscription-id: ae690070-fde1-463d-99e1-42c8a364ed7d
          enable-AzPSSession: true

      # Azure CLI Action only supports linux self-hosted runners for now.
      # If you want to execute the Azure CLI script on a windows self-hosted runner, you can execute it directly in `run`.
       - name: Azure CLI script
         uses: azure/cli@v2
         with:
          azcliversion: latest
          inlineScript: |
            az account show

       - name: Azure PowerShell script
         uses: azure/powershell@v2
         with:
          azPSVersion: "latest"
          inlineScript: |
            Get-AzContext
            Get-AzResourceGroup
